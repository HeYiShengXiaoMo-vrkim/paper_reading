## 标题
### **一种基于内部状态与外部语义协同感知的大语言模型动态安全防御系统及方法**

## 摘要`本发明提出了什么，第一步是什么，第二步是什么...实现了什么效果`
本发明提出一种基于内部状态与外部语义协同感知的大语言模型动态安全防御系统及方法。*该系统包括：对用户输入进行高风险意图识别的**预处理模块**；在模型推理时实时监控其内部关键状态，特别是注意力分布熵和层激活范数等指标异常的**监控模块**；以及协同分析内外风险信号并做出动态裁决的**裁决模块**。本发明的方法步骤包括：在将用户输入送入模型前分析其语义风险；在模型生成内容的过程中监测其内部状态的异常波动；结合外部语义风险与内部状态异常进行综合评判，并执行拦截、放行或告警等响应动作，同时利用被拦截的攻击样本实现防御系统的自适应优化。本发明能有效提升对未知和复杂攻击的识别准确率与响应及时性。`（写一块一段就行）`*

## 权利要求书

## 技术说明书

#### **【技术领域】**

[0001] 本发明属于人工智能安全技术领域，尤其涉及一种用于检测和防御针对大语言模型的恶意攻击，特别是提示注入和越狱攻击的系统及方法。

#### **【背景技术】** （现有方法的不足，自己的优点）

[0002] 近年来，以Transformer架构为基础的大语言模型（LLM）取得了突破性进展，并在自然语言处理、代码生成、智能客服、内容创作等众多领域展现出巨大的应用潜力。然而，随着其能力的增强和应用的普及，其面临的安全威胁也日益严峻。

[0003] 目前，针对大语言模型的攻击主要表现为两种形式：一是**提示注入**，攻击者通过在用户输入中植入恶意指令，意图篡改或覆盖模型开发者预设的系统级指令，从而劫持模型的任务流，使其执行非预期甚至有害的操作，例如泄露敏感数据、生成钓鱼邮件等。二是**越狱**，攻击者通过构建复杂的对话场景、进行角色扮演诱导或利用模型的逻辑漏洞，绕过其安全与道德准则，迫使模型生成被禁止的内容，如暴力、歧视性言论或非法活动指南。

[0004] 现有技术方案普遍将大语言模型视作一个不可观测的“黑箱”，防御措施仅停留在其外部的文本流层面。这种方式无法感知到模型在处理恶意输入时，其内部计算状态发生的微妙而关键的变化。因此，当面对精心构造的、语义隐晦的复杂攻击时，这些防御手段往往显得力不从心，难以提供可靠、前瞻性的安全保障。

#### **【发明内容】**

[0006] 本发明的目的在于克服现有技术的上述缺陷，提供一种能够深入模型内部、结合外部输入语义进行综合判断的大语言模型动态安全防御系统及方法。本发明旨在解决现有防御技术无法有效应对复杂多变攻击、且缺乏对新型攻击泛化能力的问题。

[0007] 为实现上述目的，本发明提出一种技术方案，即一种基于内部状态与外部语义协同感知的大语言模型动态安全防御系统，该系统至少包括：

[0008] **预处理模块**，配置于主大语言模型的前端。该模块用于在用户输入被主模型处理前，对其进行深度的语义意图分析，以识别高风险的攻击模式。具体而言，该模块可内置一个专门训练的轻量级意图分类模型，用于检测指令冲突意图、角色扮演诱导意图以及假设情景规避意图等。该模块分析后，生成一个量化的**初始风险评分**。

[0009] **监控模块**，与主大语言模型进行深度耦合。该模块的核心功能是在主模型进行推理生成的过程中，实时监控其内部关键运行状态参数的动态变化，以捕捉由恶意输入引发的异常。本发明创造性地提出监控以下至少两种内部状态指标：   `(减少效果，专注实现步骤，监控模块改一下，形成步骤）`
（a）**注意力分布熵：** 在Transformer架构中，自注意力机制决定了模型在生成每个词元时对输入序列中其他词元的关注度权重。正常对话中，注意力分布相对平稳或符合语义逻辑。当模型受到提示注入等攻击时，其注意力会异常地、高度地集中在恶意的指令片段上，而忽略系统预设的安全指令。通过计算注意力权重分布的香农熵，可以量化这种分布的混乱或集中程度。熵值的急剧下降或持续处于极低水平，是模型状态异常的强烈信号。 
（b）**层激活范数：** 监控模型中各Transformer层的输出激活值的范数。恶意输入往往会迫使模型进入其在正常训练数据中罕见的“状态空间”以绕过安全限制，这会体现在某些层级的激活值出现异常的幅值或分布。通过与预先标定的基线范数进行比较，可以检测出这种偏离。

[0010] 该监控模块根据所监测到的内部状态数据，动态地生成一个量化的**内部异常评分**。

[0011] **裁决模块**，作为系统的决策中枢。该模块接收来自预处理模块的“初始风险评分”和来自监控模块的“内部异常评分”，并根据预设的协同决策逻辑做出最终响应。该决策逻辑至少包括：  `详细展开相关技术的内容`
（a）当两个评分均较低时，判定为安全请求，允许模型正常输出。  
（b）当两个评分均较高时，判定为高置信度的攻击，立即中断模型的生成过程，并向用户返回预设的安全提示。  
（c）当初始风险评分高而内部异常评分低时，可能表示模型成功抵御了一次潜在攻击，可选择放行输出但进行日志记录以供后续分析。  
（d）当初始风险评分低而内部异常评分高时，这标志着发现了一种语义上看似无害但能引发模型内部状态紊乱的新型未知攻击。系统应立即拦截，并将该样本标记为高优先级。

[0013] 本发明还提供了一种相应的方法，其步骤与上述系统各模块的功能相对应。

#### **【附图说明】**

[0015] **图1** 是本发明所述的大语言模型动态安全防御系统的整体架构示意图。

#### **【具体实施方式】**
`实施方式不能出现效果按照第一步第二步来写，直接粘贴前面的内容就行，实施案例要加一点效果`
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTkwMjAzMDc4MV19
-->